<!DOCTYPE html>
<html><head>
<title>UI test page</title>
<meta charset="UTF-8">
<meta name="description" content="" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="css/bootstrap.css"  />                  <!-- bootstrap -->
<script type="text/javascript" src="js/jquery.UItest.js"></script>                   <!-- SNIPPET -->

</head><body>
<!-- ===================================== END HEADER ===================================== -->
 
<div align="center">
<h1>UI test Page</h1>

<button class="btn btn-primary timer">time</button>
</div>
<br/>
<ul class="pager">
  <li>
    <a href="#">Previous</a>
  </li>
  <li class="timer">
    <a href="#">Next</a>
  </li>
</ul>

<p class="result"></p>

<script>
var startTime;
var endTime;
var clickTime;
var lastClickedName;
var clickedName;
var lastClickTime;
var testTime;
var i=1;

$(document).ready(function(){
	var now = new Date();
	testTime = now.toLocaleString();
	startTime = new Date().getTime();

});


(function(){
	$('.timer').bind('click', function(){
		if(lastClickedName){
			lastClickedName =   clickedName;
		}else{
			lastClickedName =   'null';
		}
		clickedName = $(this).text();
		lastClickTime = clickTime;
		clickTime = new Date().getTime();
		totalTime = clickTime - startTime;
		costTime= clickTime - lastClickTime;
		if(!costTime){
			costTime = "FirstClick";
		}
		console.log(startTime+" "+clickTime+" "+costTime+" "+totalTime);
		$("p").remove();
		$("br").remove();
		$("button").append("</br>");
		$("ul").append("<p></p>");
		$("p").append("</br>"+testTime +"</br></br>"+lastClickedName +">>"+clickedName+": "+costTime+"___________TotalTime: "+totalTime);
		if (typeof localStorage !== 'undefined') {
 			 // Web Storageに関する処理を記述
			var rowData=lastClickedName+","+clickedName+","+costTime+","+totalTime;
			i ++;
			localStorage.setItem(i, rowData);
			console.log(localStorage.getItem(i));
			
		} else {
  			window.alert("本ブラウザではWeb Storageが使えません");
		}
	});
})();



</script>
<!-- ===================================== START FOOTER ===================================== -->
</div>

</div><!-- END WRAP -->
</body></html>